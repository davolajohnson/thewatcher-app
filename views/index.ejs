<% layout('layouts/layout') %>

<h1>My WatchList</h1>

<!-- Add New Item Button -->
<a href="/watchlist/new" class="btn">+ Add New Item</a>

<hr />

<!-- Display grouped watchlist items -->
<% for (let status in grouped) { %>
  <section>
    <h2><%= status %></h2>
    
    <% if (grouped[status].length > 0) { %>
      <ul>
        <% grouped[status].forEach(item => { %>
          <li>
            <strong><%= item.title %></strong>
            - 
            <a href="/watchlist/<%= item._id %>/edit">Edit</a>
            <form action="/watchlist/<%= item._id %>?_method=DELETE" method="POST" style="display:inline;">
              <button type="submit" onclick="return confirm('Delete this item?')">Delete</button>
            </form>
          </li>
        <% }) %>
      </ul>
    <% } else { %>
      <p>No items in this category yet.</p>
    <% } %>
  </section>
  <hr />
<% } %>


